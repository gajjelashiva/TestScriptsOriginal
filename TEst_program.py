
import re

def read_file():
  with open('/Users/sgajjela/PycharmProjects/test/venv/apache_log.log','r') as f:
    string_out = f.read()
    return string_out

string_out=read_file()

s= re.findall(r'(\d{1,3}.\d{1,3}.\d{1,3}.\d{1,3}).*(PUT|GET|POST|DELETE)',string_out)
print s
i=0
d={}
for ip , r_type in s:
    if r_type == "GET":
        i=i+1
    elif r_type == "DELETE" and i == 2 :
        print ip
    else:
        i=0
{"10.7.89.9":{}}
for ip , r_type in s:
    if d.get(ip):
        if d.get(ip).get(r_type):
            print(d[ip][r_type])
            d[ip][r_type] +=1
        else:
            d[ip][r_type] = 1
    else:
        d[ip] = {r_type:1}

print d

# command = 'wget --header \'Host: mats.webex.com\' --user-agent \'Mozilla/5.0 (Macintosh; Intel Mac OS X 10.14; rv:69.0) Gecko/20100101 Firefox/69.0/\' --header \'Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8\' --header \'Accept-Language: en-US,en;q=0.5\' --referer \'https://mats.webex.com/page/report/auditrspdetail.jsp?reqid=0&Rnd=0.492889555310725&sipCallId=8c64d61225bab00362b2891a7af9012c@10.252.68.213,c8f6220fab2e450d8090307c07eb9f29@10.252.68.213\' --header \'Cookie: ajs_user_id=%22dbbe9e7c-6eb2-4098-a1d3-e76844df5b4a%22; ajs_group_id=null; ajs_anonymous_id=%22d88a0e99-b03d-4f47-8130-c8b1c58884f8%22; CK_PMRAttendee=RzH__wAAAASO60AQj7BA92HyB8UJgw83n6PGdCW3VF6biF6I9Wsbag2:1568265183172:login; CK_AttendeeInfo=rO0ABXNyAD5jb20ud2ViZXgud2ViYXBwLmNvbW1vbi51dGlsLk1lZXRpbmdBdHRlbmRlZUluZm9F%0AeHRlcm5hbGl6YWJsZdR43RCnDwq7DAAAeHB0AAVTaGl2YXQAB0dhamplbGF0ABJzZ2FqamVsYUBj%0AaXNjby5jb21wcHBwcHBwcHBwdAANU2hpdmEgR2FqamVsYXB3CP%2F%2F%2F%2F8AAAABeA%3D%3D; AMCV_5C0A123F5245AEEA0A490D45%40AdobeOrg=1585540135%7CMCIDTS%7C18150%7CMCMID%7C90611361302488200140228232621388671088%7CMCAAMLH-1568785133%7C12%7CMCAAMB-1568785133%7CRKhpRz8krg2tLO6pguXWp5olkAcUniQYPHaMWWgdJ3xzPWQmdj0y%7CMCOPTOUT-1568187533s%7CNONE%7CMCAID%7CNONE%7CvVersion%7C4.4.0%7CMCSYNCSOP%7C411-18158; _ga=GA1.2.1159115488.1551776486; lp_host=yes; username=sgajjela; check=true; mbox=PC#04f78f1082a14ed5a975b2c79a3bc513.22_28#1631425133|session#f6f9786a3d5040d29a835161b14a87be#1568182193; AMCVS_5C0A123F5245AEEA0A490D45%40AdobeOrg=1; utag_main=v_id:016d196c4b0e00ae34c72bafbe5000052002c00f0093c$_sn:2$_ss:0$_st:1568182137211$consent_prompt:true$ses_id:1568180333745%3Bexp-session$_pn:1%3Bexp-session$ctm_ss:true%3Bexp-session; s_cc=true; CONSENTMGR=ts:1568089590818%7Cconsent:true; _gcl_au=1.1.1862570553.1568089591; optimizelyEndUserId=oeu1568175587888r0.04541814977226133; ADRUM=s=1568628961085&r=https%3A%2F%2Fteams.webex.com%2Fspaces%2Ffdd33a30-fb7a-11e7-afb3-ab9863788cc3%2Fchat%3F0; CK_CDNHostStatus=cisco.webex.com|1568265192609|1; _hjid=d53d48de-9b54-4451-90ac-6afbf9a7bff2; stc120006=tsa:1666863276:20190911060856|env:1%7C20191012053856%7C20190911060856%7C1%7C1095238:20200910053856|uid:1568180336864.717571525.094012.120006.2017703631.4:20200910053856|srchist:1095238%3A1%3A20191012053856:20200910053856; _fbp=fb.1.1568180338002.360560792; ticket=AAABbSR783IAABUYA0gAKEgyU0sAAAAEbCB4Pdhe130Z5bQG+ZrqvvTVESmMaxhku/WqetG45t5BSABmAQFIMlNLAAAABAzJoHowhmTUgRsXByNq7T8LF03LrBuYJrU3mRClL10SU0sAAAAEqUkM8y7o6hBHYSj9xhNNBwWJuhR9nXFDJg3ChyEFUynuxYE37PNvMyjDt9aPoC4nmU27FbzCOQ2lgNStwF1mkgPgiyc1R1lhkN60SkPZTPSOZ+qn7h2Of+0cqaDqxq71ZSsRKVa7VTTP2XPD3TYwzyIH/mpb9Gd4jdSi+v7xujKcLPjZk38Ay1JBHmJZT4GmR/9tUfPpTh1HdbRiGMfohHVArukbj3wSzyg6pWsw8ulfRkxBR19BRERJTkdfU0hBMjU2X0FMR09SSVRITV8=; JSESSIONID=BC301F071892DCEE5715E58F8B010035; callCILogout=YES; NSC_ttm-nbutwjqtk-443-wjq=ffffffff09f41a0f45525d5f4f58455e445a4a423660\' --header \'Upgrade-Insecure-Requests: 1\' \'https://mats.webex.com/page/report/auditrspexcel.jsp?reqid=0&sipCallId=8c64d61225bab00362b2891a7af9012c@10.252.68.213,c8f6220fab2e450d8090307c07eb9f29@10.252.68.213&Rnd=0.09812127562436701\'
#      \'--referer {} --output-document {} --header \'Cookie: optimizelyEndUserId=oeu1549269338349r0.7158015530100864; ajs_user_id=%22dbbe9e7c-6eb2-4098-a1d3-e76844df5b4a%22; ajs_group_id=null; ajs_anonymous_id=%22d88a0e99-b03d-4f47-8130-c8b1c58884f8%22; CK_PMRAttendee=RzH__wAAAIUhuueD7T0bMR8Y9j_ZGwKOVp6w0B2Lsxv9nt0ZMAipVQ2:1554717475912:login; CK_AttendeeInfo=rO0ABXNyAD5jb20ud2ViZXgud2ViYXBwLmNvbW1vbi51dGlsLk1lZXRpbmdBdHRlbmRlZUluZm9F%0AeHRlcm5hbGl6YWJsZdR43RCnDwq7DAAAeHBwcHBwcHBwcHBwcHBwcHB3CP%2F%2F%2F%2F8AAAABeA%3D%3D; _pk_id.23.c686=17a77e277b8dee87.1551418170.1.1551418187.1551418170.; AMCV_5C0A123F5245AEEA0A490D45%40AdobeOrg=-330454231%7CMCIDTS%7C17995%7CMCMID%7C90611361302488200140228232621388671088%7CMCAAMLH-1555322308%7C3%7CMCAAMB-1555322308%7CRKhpRz8krg2tLO6pguXWp5olkAcUniQYPHaMWWgdJ3xzPWQmdj0y%7CMCOPTOUT-1554724708s%7CNONE%7CMCAID%7CNONE%7CvVersion%7C3.1.2; mbox=PC#e02ef317b7a74ce1828a6f57e3a4b367.22_9#1562493510|check#true#1554717570|session#f87173fcf88246c39364398ec7f2378a#1554719370; _ga=GA1.2.1159115488.1551776486; lp_host=yes; NSC_ttm-nbutcut-443-wjq=ffffffff09f4266145525d5f4f58455e445a4a423660; JSESSIONID=3AE2A84996E4644F69275E5ACF012AAC; matsUserName4CI=sgajjela%40cisco.com; amlbcookie=14; cisPRODiPlanetDirectoryPro=AQIC5wM2LY4SfczN-U2eyFe9tFD_OmzsPh3iV-Roo_8Xopg.*AAJTSQACMDIAAlNLABM0MDc4NDE3MzM0ODI1MzM3MzI0AAJTMQACMTQ.* \' --header \'Upgrade-Insecure-Requests: 1\' {} --output-document {} --no-check-certificate'.format(website, report_page,  website, report_page)


# command = "wget --header 'Host: mats.webex.com' --user-agent 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10.14; rv:69.0) Gecko/20100101 Firefox/69.0' --header 'Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8' --header 'Accept-Language: en-US,en;q=0.5' --referer 'https://mats.webex.com/page/report/auditrspdetail.jsp?reqid=0&Rnd=0.492889555310725&sipCallId=8c64d61225bab00362b2891a7af9012c@10.252.68.213,c8f6220fab2e450d8090307c07eb9f29@10.252.68.213' --header 'Cookie: ajs_user_id=%22dbbe9e7c-6eb2-4098-a1d3-e76844df5b4a%22; ajs_group_id=null; ajs_anonymous_id=%22d88a0e99-b03d-4f47-8130-c8b1c58884f8%22; CK_PMRAttendee=RzH__wAAAASO60AQj7BA92HyB8UJgw83n6PGdCW3VF6biF6I9Wsbag2:1568265183172:login; CK_AttendeeInfo=rO0ABXNyAD5jb20ud2ViZXgud2ViYXBwLmNvbW1vbi51dGlsLk1lZXRpbmdBdHRlbmRlZUluZm9F%0AeHRlcm5hbGl6YWJsZdR43RCnDwq7DAAAeHB0AAVTaGl2YXQAB0dhamplbGF0ABJzZ2FqamVsYUBj%0AaXNjby5jb21wcHBwcHBwcHBwdAANU2hpdmEgR2FqamVsYXB3CP%2F%2F%2F%2F8AAAABeA%3D%3D; AMCV_5C0A123F5245AEEA0A490D45%40AdobeOrg=1585540135%7CMCIDTS%7C18150%7CMCMID%7C90611361302488200140228232621388671088%7CMCAAMLH-1568785133%7C12%7CMCAAMB-1568785133%7CRKhpRz8krg2tLO6pguXWp5olkAcUniQYPHaMWWgdJ3xzPWQmdj0y%7CMCOPTOUT-1568187533s%7CNONE%7CMCAID%7CNONE%7CvVersion%7C4.4.0%7CMCSYNCSOP%7C411-18158; _ga=GA1.2.1159115488.1551776486; lp_host=yes; username=sgajjela; check=true; mbox=PC#04f78f1082a14ed5a975b2c79a3bc513.22_28#1631425133|session#f6f9786a3d5040d29a835161b14a87be#1568182193; AMCVS_5C0A123F5245AEEA0A490D45%40AdobeOrg=1; utag_main=v_id:016d196c4b0e00ae34c72bafbe5000052002c00f0093c$_sn:2$_ss:0$_st:1568182137211$consent_prompt:true$ses_id:1568180333745%3Bexp-session$_pn:1%3Bexp-session$ctm_ss:true%3Bexp-session; s_cc=true; CONSENTMGR=ts:1568089590818%7Cconsent:true; _gcl_au=1.1.1862570553.1568089591; optimizelyEndUserId=oeu1568175587888r0.04541814977226133; ADRUM=s=1568628961085&r=https%3A%2F%2Fteams.webex.com%2Fspaces%2Ffdd33a30-fb7a-11e7-afb3-ab9863788cc3%2Fchat%3F0; CK_CDNHostStatus=cisco.webex.com|1568265192609|1; _hjid=d53d48de-9b54-4451-90ac-6afbf9a7bff2; stc120006=tsa:1666863276:20190911060856|env:1%7C20191012053856%7C20190911060856%7C1%7C1095238:20200910053856|uid:1568180336864.717571525.094012.120006.2017703631.4:20200910053856|srchist:1095238%3A1%3A20191012053856:20200910053856; _fbp=fb.1.1568180338002.360560792; ticket=AAABbSR783IAABUYA0gAKEgyU0sAAAAEbCB4Pdhe130Z5bQG+ZrqvvTVESmMaxhku/WqetG45t5BSABmAQFIMlNLAAAABAzJoHowhmTUgRsXByNq7T8LF03LrBuYJrU3mRClL10SU0sAAAAEqUkM8y7o6hBHYSj9xhNNBwWJuhR9nXFDJg3ChyEFUynuxYE37PNvMyjDt9aPoC4nmU27FbzCOQ2lgNStwF1mkgPgiyc1R1lhkN60SkPZTPSOZ+qn7h2Of+0cqaDqxq71ZSsRKVa7VTTP2XPD3TYwzyIH/mpb9Gd4jdSi+v7xujKcLPjZk38Ay1JBHmJZT4GmR/9tUfPpTh1HdbRiGMfohHVArukbj3wSzyg6pWsw8ulfRkxBR19BRERJTkdfU0hBMjU2X0FMR09SSVRITV8=; JSESSIONID=BC301F071892DCEE5715E58F8B010035; callCILogout=YES; NSC_ttm-nbutwjqtk-443-wjq=ffffffff09f41a0f45525d5f4f58455e445a4a423660' --header 'Upgrade-Insecure-Requests: 1' 'https://mats.webex.com/page/report/auditrspexcel.jsp?reqid=0&sipCallId=8c64d61225bab00362b2891a7af9012c@10.252.68.213,c8f6220fab2e450d8090307c07eb9f29@10.252.68.213&Rnd=0.09812127562436701' --output-document 'MATS.csv'  --no-check-certificate"

# command="wget --header 'Host: mats.webex.com' --user-agent 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10.14; rv:69.0) Gecko/20100101 Firefox/69.0' --header 'Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8' --header 'Accept-Language: en-US,en;q=0.5' --referer {} --header 'Cookie: ajs_user_id=%22dbbe9e7c-6eb2-4098-a1d3-e76844df5b4a%22; ajs_group_id=null; ajs_anonymous_id=%22d88a0e99-b03d-4f47-8130-c8b1c58884f8%22; CK_PMRAttendee=RzH__wAAAASO60AQj7BA92HyB8UJgw83n6PGdCW3VF6biF6I9Wsbag2:1568265183172:login; CK_AttendeeInfo=rO0ABXNyAD5jb20ud2ViZXgud2ViYXBwLmNvbW1vbi51dGlsLk1lZXRpbmdBdHRlbmRlZUluZm9F%0AeHRlcm5hbGl6YWJsZdR43RCnDwq7DAAAeHB0AAVTaGl2YXQAB0dhamplbGF0ABJzZ2FqamVsYUBj%0AaXNjby5jb21wcHBwcHBwcHBwdAANU2hpdmEgR2FqamVsYXB3CP%2F%2F%2F%2F8AAAABeA%3D%3D; AMCV_5C0A123F5245AEEA0A490D45%40AdobeOrg=1585540135%7CMCIDTS%7C18150%7CMCMID%7C90611361302488200140228232621388671088%7CMCAAMLH-1568785133%7C12%7CMCAAMB-1568785133%7CRKhpRz8krg2tLO6pguXWp5olkAcUniQYPHaMWWgdJ3xzPWQmdj0y%7CMCOPTOUT-1568187533s%7CNONE%7CMCAID%7CNONE%7CvVersion%7C4.4.0%7CMCSYNCSOP%7C411-18158; _ga=GA1.2.1159115488.1551776486; lp_host=yes; username=sgajjela; check=true; mbox=PC#04f78f1082a14ed5a975b2c79a3bc513.22_28#1631425133|session#f6f9786a3d5040d29a835161b14a87be#1568182193; AMCVS_5C0A123F5245AEEA0A490D45%40AdobeOrg=1; utag_main=v_id:016d196c4b0e00ae34c72bafbe5000052002c00f0093c$_sn:2$_ss:0$_st:1568182137211$consent_prompt:true$ses_id:1568180333745%3Bexp-session$_pn:1%3Bexp-session$ctm_ss:true%3Bexp-session; s_cc=true; CONSENTMGR=ts:1568089590818%7Cconsent:true; _gcl_au=1.1.1862570553.1568089591; optimizelyEndUserId=oeu1568175587888r0.04541814977226133; ADRUM=s=1568628961085&r=https%3A%2F%2Fteams.webex.com%2Fspaces%2Ffdd33a30-fb7a-11e7-afb3-ab9863788cc3%2Fchat%3F0; CK_CDNHostStatus=cisco.webex.com|1568265192609|1; _hjid=d53d48de-9b54-4451-90ac-6afbf9a7bff2; stc120006=tsa:1666863276:20190911060856|env:1%7C20191012053856%7C20190911060856%7C1%7C1095238:20200910053856|uid:1568180336864.717571525.094012.120006.2017703631.4:20200910053856|srchist:1095238%3A1%3A20191012053856:20200910053856; _fbp=fb.1.1568180338002.360560792; ticket=AAABbSR783IAABUYA0gAKEgyU0sAAAAEbCB4Pdhe130Z5bQG+ZrqvvTVESmMaxhku/WqetG45t5BSABmAQFIMlNLAAAABAzJoHowhmTUgRsXByNq7T8LF03LrBuYJrU3mRClL10SU0sAAAAEqUkM8y7o6hBHYSj9xhNNBwWJuhR9nXFDJg3ChyEFUynuxYE37PNvMyjDt9aPoC4nmU27FbzCOQ2lgNStwF1mkgPgiyc1R1lhkN60SkPZTPSOZ+qn7h2Of+0cqaDqxq71ZSsRKVa7VTTP2XPD3TYwzyIH/mpb9Gd4jdSi+v7xujKcLPjZk38Ay1JBHmJZT4GmR/9tUfPpTh1HdbRiGMfohHVArukbj3wSzyg6pWsw8ulfRkxBR19BRERJTkdfU0hBMjU2X0FMR09SSVRITV8=; JSESSIONID=BC301F071892DCEE5715E58F8B010035; callCILogout=YES; NSC_ttm-nbutwjqtk-443-wjq=ffffffff09f41a0f45525d5f4f58455e445a4a423660' --header 'Upgrade-Insecure-Requests: 1' 'https://mats.webex.com/{}' --output-document {} --no-check-certificate".format(report_page, website,report_page+'.html')

# command = "wget --header 'Host: matsbts.webex.com' --user-agent 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10.14; rv:69.0) Gecko/20100101 Firefox/69.0' --header 'Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8' --header 'Accept-Language: en-US,en;q=0.5' --referer {}  --header 'Cookie: ajs_user_id=%22dbbe9e7c-6eb2-4098-a1d3-e76844df5b4a%22; ajs_group_id=null; ajs_anonymous_id=%22d88a0e99-b03d-4f47-8130-c8b1c58884f8%22; CK_PMRAttendee=RzH__wAAAIXr_1rN_5WTkPP762-zL98dVPCMHzADBQUtwIqhMc2WLg2:1569240632324:login; CK_AttendeeInfo=rO0ABXNyAD5jb20ud2ViZXgud2ViYXBwLmNvbW1vbi51dGlsLk1lZXRpbmdBdHRlbmRlZUluZm9F%0AeHRlcm5hbGl6YWJsZdR43RCnDwq7DAAAeHBwcHBwcHBwcHBwcHBwcHB3CP%2F%2F%2F%2F8AAAABeA%3D%3D; _pk_id.23.c686=17a77e277b8dee87.1551418170.1.1551418187.1551418170.; AMCV_5C0A123F5245AEEA0A490D45%40AdobeOrg=1585540135%7CMCIDTS%7C18150%7CMCMID%7C90611361302488200140228232621388671088%7CMCAAMLH-1568785133%7C12%7CMCAAMB-1568785133%7CRKhpRz8krg2tLO6pguXWp5olkAcUniQYPHaMWWgdJ3xzPWQmdj0y%7CMCOPTOUT-1568187533s%7CNONE%7CMCAID%7CNONE%7CvVersion%7C4.4.0%7CMCSYNCSOP%7C411-18158; _ga=GA1.2.1159115488.1551776486; lp_host=yes; mbox=PC#04f78f1082a14ed5a975b2c79a3bc513.22_28#1631425133|session#f6f9786a3d5040d29a835161b14a87be#1568182193; utag_main=v_id:016d196c4b0e00ae34c72bafbe5000052002c00f0093c$_sn:2$_ss:0$_st:1568182137211$consent_prompt:true$ses_id:1568180333745%3Bexp-session$_pn:1%3Bexp-session$ctm_ss:true%3Bexp-session; CONSENTMGR=ts:1568089590818%7Cconsent:true; _gcl_au=1.1.1862570553.1568089591; optimizelyEndUserId=oeu1568175587888r0.04541814977226133; _hjid=d53d48de-9b54-4451-90ac-6afbf9a7bff2; stc120006=tsa:1666863276:20190911060856|env:1%7C20191012053856%7C20190911060856%7C1%7C1095238:20200910053856|uid:1568180336864.717571525.094012.120006.2017703631.4:20200910053856|srchist:1095238%3A1%3A20191012053856:20200910053856; _fbp=fb.1.1568180338002.360560792; CK_CDNHostStatus=testcdn.webex.com|1569231670482|0; ticket=AAABbV4ICSUAABUYA0gAKEgyU0sAAACFgK19gEpjHMs8Ut4mblAzEyLdx3NyoBPjgT6KBWfV9ZlBSABmAQFIMlNLAAAAhdzcEh7wdlNx8YYBhyXoHsixenIH0xaEdhVgHJE6RrQBU0sAAACFWg8r04+I5zGj0vG/RguVw6/kPYk0wyWGntaUOUFKezylwIC6ZEad+rqWgac43iEnKXuSm7vI/HjbB83qHGx7BVOztPk5q50OKUzvnEYxxASbVPr5Jt8TAUKwpDFY7rmit2KAUkmBYm/vOqksPu0yhvWL5r+dNFvC151LbuAg5ZOegBV1VXyou22czLeO5rWckbIBdpPqF2DDoTxOxuLdQqS+KgnvwKGg6WLExYzeF2UYt4KAUZA0dkUqKAnvVq63X0ZMQUdfQURESU5HX1NIQTI1Nl9BTEdPUklUSE1f; NSC_ttm-nbutcut-443-wjq=ffffffff09f4266045525d5f4f58455e445a4a423660; JSESSIONID=F1A4B2A8A7AB494DAC9A938DD119107B; matsUserName4CI=sgajjela%40cisco.com' --header 'Upgrade-Insecure-Requests: 1' 'https://matsbts.webex.com/{}‘ --output-document {} --no-check-certificate".format(report_page, website,report_page+'.html')



